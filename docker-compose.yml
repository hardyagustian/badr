version: '3.8'
services:
  backend:
    container_name: backend-svc
    image: hardyaagustian/badr:be-v-0.1
    build:
      context: backend/
      dockerfile: Dockerfile
    restart: always
    ports:
      - '3001:3011'

  frontend:
    container_name: frontend-svc
    image: hardyaagustian/badr:fe-v-0.1
    build:
      context: frontend/
      dockerfile: Dockerfile
    restart: always
    ports :
      - '3000:3000'

  gateway:
    container_name: nginx-gw
    restart: unless-stopped
    image: nginx:alpine
    ports:
      - 80:80
    #  - 443:443
    volumes:
      - ./nginx/conf.d:/etc/nginx/conf.d
      # - ./certbot/conf:/etc/letsencrypt
      # - ./certbot/www:/var/www/certbot
